# SFID 评审问题清单（待拍板）

## 1. 组织与权限
- [ ] 是否确认三层组织：`NATIONAL / PROVINCE / CITY_BUREAU`？
- [ ] 是否确认一个市只对应一个护照管理局（不单独拆 bureau 实体）？
- [ ] 是否启用“双人复核”作为默认强制策略（绑定/解绑）？
- [ ] 省级管理员是否允许跨市查询（仅本省）？
- [ ] 国家级是否允许直接操作绑定/解绑，还是仅紧急场景可用？

## 2. 绑定/解绑规则
- [ ] 是否确认绑定和解绑都必须管理员操作，用户不可自助？
- [ ] 解绑后是否允许同公钥重新绑定新索引号？
- [ ] 解绑后是否保留历史映射（建议保留，状态置 `UNBOUND`）？
- [ ] 是否需要“冻结（SUSPENDED）”状态用于风控？
- [ ] 是否设置绑定申请有效期（例如 24 小时）？

## 3. CPMS 外部依赖
- [ ] 是否需要 CPMS 提供“离线签名证明包”再导入 SFID？
- [ ] 若需要，CPMS 签名公钥如何分发与轮换（线下包）？
- [ ] 是否需要 CPMS 证明包吊销列表（防伪防重放）？
- [ ] SFID 是否仅校验索引号格式，还是必须校验 CPMS 签发真实性？

## 4. 凭证与密钥
- [ ] 是否确认分阶段密钥策略：`v1.0 单国家级`、`v2.0 分层密钥`？
- [ ] 绑定凭证和投票凭证是否都采用独立域分隔（`BIND/VOTE`）？
- [ ] 凭证有效期是否定为 2-5 分钟？
- [ ] 是否启用 `key_id` 并支持双 key 并行窗口轮换？
- [ ] 是否在 v1.0 就预留 `signer_scope` 字段（固定 `NATIONAL`）？
- [ ] 私钥是否必须放入 HSM（或阶段性先软件密钥，后续升级）？
- [ ] 公钥上链更新流程是否走治理提案？

## 5. 数据库与容灾
- [ ] 是否确认“全国主库 + 省级只读副本”？
- [ ] 主库 HA 的 RTO 目标是多少（如 5 分钟）？
- [ ] 备份恢复 RPO 目标是多少（如 5-15 分钟）？
- [ ] 副本延迟上限阈值是多少（如 5 秒）？
- [ ] 是否需要跨地域灾备库（异地热备/冷备）？

## 6. 审计与合规
- [ ] 审计日志保留年限是否确认不少于 3 年？
- [ ] 是否要求审计日志不可物理删除（仅归档）？
- [ ] 是否需要审计导出审批流（谁能导出、是否脱敏）？
- [ ] 是否需要记录管理员终端设备指纹与来源 IP？

## 7. 性能与容量
- [ ] 峰值并发目标（绑定申请 QPS、投票凭证 QPS）是多少？
- [ ] 预计首年数据量级（绑定关系、审计日志）是多少？
- [ ] 是否启用冷热分层归档策略（按月/季度）？

## 8. 交付策略
- [ ] 是否按 `M1/M2/M3` 三阶段交付？
- [ ] 是否先在 1-2 个省份灰度试运行？
- [ ] 回滚策略是否确认“API 可回滚、DB 仅前向兼容迁移”？
- [ ] 上线是否需要 7x24 值班窗口（首周）？

## 9. 评审输出（会议结论）
- [ ] 形成冻结版 API 字段（版本号）
- [ ] 形成冻结版 DB 约束（唯一约束/状态机）
- [ ] 形成密钥管理与轮换 SOP
- [ ] 形成上线与回滚 Runbook
